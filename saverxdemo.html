<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>SaverX Demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <style>
    .saverxbox {
      box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
    }

    .button-5 {
      align-items: center;
      background-clip: padding-box;
      background-color: #1b617d;
      border: 1px solid transparent;
      border-radius: .25rem;
      box-shadow: rgba(0, 0, 0, 0.02) 0 1px 3px 0;
      box-sizing: border-box;
      color: #fff;
      cursor: pointer;
      display: inline-flex;
      font-family: system-ui, -apple-system, system-ui, "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: 16px;
      font-weight: 600;
      justify-content: center;
      line-height: 1.25;
      margin: 0;
      min-height: 3rem;
      padding: calc(.875rem - 1px) calc(1.5rem - 1px);
      position: relative;
      text-decoration: none;
      transition: all 250ms;
      user-select: none;
      -webkit-user-select: none;
      touch-action: manipulation;
      vertical-align: baseline;
      width: auto;
    }

    .button-5:hover,
    .button-5:focus {
      background-color: #1b617dd1;
      box-shadow: rgba(0, 0, 0, 0.1) 0 4px 12px;
    }

    .button-5:hover {
      transform: translateY(-1px);
    }

    .button-5:active {
      background-color: #1b617dd1;
      box-shadow: rgba(0, 0, 0, .06) 0 2px 4px;
      transform: translateY(0);
    }
  </style>
</head>

<body>
  <div class="p-5 mb-4 bg-body-tertiary rounded-3">
    <div class="container-fluid py-3 text-center ">
      <h1 class="display-5 fw-bold">SaverX Demo</h1>
    </div>
  </div>
  <div class="container">

    <img src="assets/images/temp/comp.gif" class="rounded mx-auto d-block " alt="..." height="300" width="300">
    <div class="row align-items-center p-3">
      <div class="col-md-12 col-lg-6 col-sm-12">
        <div class=" saverxbox p-3">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Description</th>

              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">Chillers</th>
                <td>2 Water Cooled Chillers</td>
              </tr>

              <tr>
                <th scope="row">AHUs</th>
                <td>11</td>
              </tr>

              <tr>
                <th scope="row">Location</th>
                <td>Chennai</td>
              </tr>

              <tr>
                <th scope="row">Working hours </th>
                <td>13 hours/day</td>
              </tr>

              <tr>
                <th scope="row">Duration</th>
                <td>One Month (July)</td>
              </tr>

            </tbody>
          </table>
        </div>
      </div>
      <div class="col-md-12 col-lg-6 col-sm-12">
        <div class="saverxbox p-3">
          <form method="POST" id="saverxDemoForm">
            <div class="input-group mb-3">
              <label for="Chilled Water Temperature Setpoint" class="form-label">Chilled Water Temperature
                Setpoint</label>
              <div class="input-group">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="cooling_water_temperature_setpoint"
                    id="inlineRadio1" value="6" required>
                  <label class="form-check-label" for="inlineRadio1">6 °C</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="cooling_water_temperature_setpoint"
                    id="inlineRadio2" value="7" required>
                  <label class="form-check-label" for="inlineRadio2">7 °C</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="cooling_water_temperature_setpoint"
                    id="inlineRadio3" value="8" required>
                  <label class="form-check-label" for="inlineRadio3">8 °C</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="cooling_water_temperature_setpoint"
                    id="inlineRadio4" value="9" required>
                  <label class="form-check-label" for="inlineRadio4">9 °C</label>
                </div>
              </div>

            </div>

            <div class="input-group mb-3">
              <label for="basic-url" class="form-label">Cooling Tower's Cooling Water Temp</label>
              <div class="input-group">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="chiller_setpoint_temperature" id="inlineRadio1"
                    value="29" required>
                  <label class="form-check-label" for="inlineRadio1">29 °C</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="chiller_setpoint_temperature" id="inlineRadio2"
                    value="30" required>
                  <label class="form-check-label" for="inlineRadio2">30 °C</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="chiller_setpoint_temperature" id="inlineRadio3"
                    value="31" required>
                  <label class="form-check-label" for="inlineRadio3">31 °C</label>
                </div>
              </div>

            </div>

            <div class="input-group mb-3">
              <label for="basic-url" class="form-label">AHU Opening Percentage</label>
              <div class="input-group">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="ahu_opening_percentage" id="inlineRadio1"
                    value="80" required>
                  <label class="form-check-label" for="inlineRadio1">80%</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="ahu_opening_percentage" id="inlineRadio2"
                    value="90" required>
                  <label class="form-check-label" for="inlineRadio2">90%</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="ahu_opening_percentage" id="inlineRadio3"
                    value="100" required>
                  <label class="form-check-label" for="inlineRadio3">100%</label>
                </div>
              </div>

            </div>
            <button class="button-5" role="button" class="btn-zodhya" id="simulate">Simulate Energy Consumption with
              model</button>
          </form>
        </div>
      </div>
      <div class="col d-flex justify-content-center">
        <div class="result p-3" id="result" >
          <img src="assets/images/giphy.gif" alt="" id="loader" style="display: none;">


          <h5 id="optimalresult" style="color: #fa6400;"></h5>

          <div class="row">
            <div class="col-6">
              <img id="graph" src='' class="img-fluid" style="width:100%">
            </div>

            <button id="tooglebutton" class="btn btn-primary my-2" style="display: none" onclick="displayGraph()"> Toggle daily graph</button>

            <div class="col-6" style="display:none" id="daygraphdisplay">
              <img id="daygraph" src='' class="rounded mx-auto d-block" style="width: 100%;">
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>

  <script>
    function displayGraph() {
      let daygraphdisplay = document.getElementById("daygraphdisplay")
      let tooglebutton= document.getElementById('tooglebutton')

      if (daygraphdisplay.style.display == "none") {
        daygraphdisplay.style.display = "block";
        tooglebutton.style.display="none"
      }
    }
  </script>


  <script>
    const saverxDemoForm = document.getElementById('saverxDemoForm');
    saverxDemoForm.addEventListener('submit', async function (e) {
      e.preventDefault();
      let result = document.getElementById('result')
      let loader = document.getElementById('loader')
      result.style.display = 'block'
      loader.style.display = 'block'
      window.scrollTo(0, 500);

      const formData = new FormData(saverxDemoForm).entries()

      let cooling_water_temperature_setpoint = document.getElementsByName('cooling_water_temperature_setpoint');
      let chiller_setpoint_temperature = document.getElementsByName('chiller_setpoint_temperature');
      let ahu_opening_percentage = document.getElementsByName('ahu_opening_percentage')

      let cooling_water_temperature_setpoint_value;
      let chiller_setpoint_temperature_value;
      let ahu_opening_percentage_value;

      for (let i = 0; i < cooling_water_temperature_setpoint.length; i++) {
        if (cooling_water_temperature_setpoint[i].checked)
          cooling_water_temperature_setpoint_value = cooling_water_temperature_setpoint[i].value;
      }

      for (let i = 0; i < chiller_setpoint_temperature.length; i++) {
        if (chiller_setpoint_temperature[i].checked)
          chiller_setpoint_temperature_value = chiller_setpoint_temperature[i].value;
      }

      for (let i = 0; i < ahu_opening_percentage.length; i++) {
        if (ahu_opening_percentage[i].checked)
          ahu_opening_percentage_value = ahu_opening_percentage[i].value;
      }

      let data = {
        "cooling_water_temperature_setpoint": cooling_water_temperature_setpoint_value,
        "chiller_setpoint_temperature": chiller_setpoint_temperature_value,
        "ahu_opening_percentage": ahu_opening_percentage_value
      }

      const daygraph = document.querySelector("#daygraph");
      const graph = document.querySelector("#graph")

      try {
        const response = await fetch('https://yashwanthzodhya.pythonanywhere.com/saverxpredict_api', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        loader.style.display = 'none'

        let Energy_Consumption_without_SaverX = result.Energy_Consumption_without_SaverX
        let Predicted_Energy_Consumption_with_SaverX = result.Predicted_Energy_Consumption_with_SaverX
        let Predicted_Savings = result.Predicted_Savings
        let monthly_image = result.monthly_url
        let img_url = result.img_url
        graph.setAttribute('src', monthly_image);
        daygraph.setAttribute('src', img_url)

        let button = document.getElementById('tooglebutton')
        button.style.display = 'block'

        let showdata = `Predicted Energy Consumption without SaverX: ${Energy_Consumption_without_SaverX} kWh,<br> Predicted Energy Consumption with SaverX: ${Predicted_Energy_Consumption_with_SaverX} kWh, <br>Savings: ${Predicted_Savings}%`
        document.getElementById('optimalresult').innerHTML = showdata


      } catch (error) {
        console.log(error);
      }


    })

  </script>

  </div>
</body>

</html>